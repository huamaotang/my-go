# 基准测试
## 知识点
- 测量一个程序在固定工作负载下的性能
- 在Go语言中，基准测试函数和普通测试函数写法类似，但是以Benchmark未前缀名，并且带有一个*testing.B类型的参数
- *testingB参数除了提供和\*testing.T类似的方法，还有额外一些和性能测量相关的方法。还提供了一个整数N，用于指定操作执行的循环次数
- 默认情况下不运行任何基准测试的函数，需要通过-bench命令行标志参数手工指定要运行的基准测试函数
- 该参数是一个正则表达式，用于匹配要执行的基准测试函数的名字，默认值是空的。其中`.`模式将可以匹配所有基准测试函数

## 执行结果分析
- go test命令

```
go test -bench=.
```
执行结果：

```
goos: darwin
goarch: amd64
pkg: my-go/tgpl/11.Testing/ch11/word2
BenchmarkIsPalindrome-4   	 3761167	       319 ns/op
PASS
ok  	my-go/tgpl/11.Testing/ch11/word2	1.987s
```
- 结果中基准测试名的数字后缀部分，这里是4，表示运行时对应的GOMAXPROCS的值，对于一些与并发相关的基准测试是重要的信息
- 报告显示每次调用IsPalindrome函数花费0.319微妙，是执行3761167次的平均时间
- 因为基准测试驱动器开始并不知道每个基准测试函数运行所花的时间，它会尝试在真正运行基准函数之前先尝试用较小的N运行函数，来估算基准测试函数所需要的时间，然后推断一个较大的时间保证稳定的测量结果